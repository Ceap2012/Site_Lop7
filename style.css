// Database teórica solicitada
const database = {
    "Futebol": {
        how: "Consiste em conduzir a bola até o gol adversário usando os pés. A estratégia envolve passes curtos, longos e movimentação coletiva.",
        rules: ["11 jogadores em campo", "Duração de 90 minutos", "Impedimento por sensores", "Cartões de punição disciplinar"],
        res: "Bolas inteligentes com NFC, sensores de campo 2026 e VAR em tempo real."
    },
    "Ping Pong": {
        how: "Rebater a bola sobre uma rede em uma mesa. O jogador deve fazer a bola quicar no lado adversário sem que ele consiga devolver.",
        rules: ["Sets de 11 pontos", "Saque deve quicar nos dois lados", "Mão livre não pode tocar na mesa"],
        res: "Raquetes de polímero aeroespacial e mesas com sensores de impacto laser."
    },
    "Basquete": {
        how: "Arremessar a bola dentro de uma cesta elevada. O drible (quicar a bola) é obrigatório para se locomover.",
        rules: ["5 jogadores ativos", "Posse de bola de 24 segundos", "Pontuações de 1, 2 e 3 pontos"],
        res: "Tabelas de vidro temperado digital e calçados de absorção cinética."
    },
    "Vôlei": {
        how: "O objetivo é lançar a bola sobre a rede para tocar o chão do oponente. Cada time tem 3 toques para devolver a bola.",
        rules: ["6 jogadores em quadra", "Rodízio de posições no saque", "Sets de 25 pontos"],
        res: "Redes com fibra de detecção de toque e bolas com grip tecnológico."
    }
};

let roteiro = [];
let isLoginMode = false;

// CONTROLE DE LOGIN
function alternarModo() {
    isLoginMode = !isLoginMode;
    document.getElementById('auth-title').innerText = isLoginMode ? "LOGIN" : "CRIAR CONTA";
    document.getElementById('btn-auth').innerText = isLoginMode ? "ENTRAR" : "CADASTRAR";
}

function gerenciarAcesso() {
    const user = document.getElementById('user-input').value;
    const pass = document.getElementById('pass-input').value;

    if (isLoginMode) {
        if (localStorage.getItem(user) === pass) {
            document.getElementById('screen-auth').classList.add('hidden');
            document.getElementById('screen-selection').classList.remove('hidden');
            document.getElementById('user-display').innerText = user.toUpperCase();
        } else alert("Credenciais Inválidas");
    } else {
        localStorage.setItem(user, pass);
        alert("Conta Criada! Mude para Entrar.");
        alternarModo();
    }
}

// SELEÇÃO
function adicionarAoRoteiro(esp, el) {
    if (!roteiro.includes(esp)) {
        roteiro.push(esp);
        el.classList.add('selected');
        const listUI = document.getElementById('display-roteiro');
        if (roteiro.length === 1) listUI.innerHTML = "";
        listUI.innerHTML += `<li>${roteiro.length}º - ${esp}</li>`;
        document.getElementById('btn-iniciar').classList.remove('hidden');
    }
}

// ÁREA DE TRABALHO
function abrirWorkspace() {
    document.getElementById('screen-selection').classList.add('hidden');
    document.getElementById('screen-workspace').classList.remove('hidden');
    
    const nav = document.getElementById('sidebar-nav');
    nav.innerHTML = "";
    
    roteiro.forEach(esp => {
        const btn = document.createElement('button');
        btn.innerText = esp.toUpperCase();
        btn.onclick = () => carregarEstudo(esp);
        nav.appendChild(btn);
    });
    
    carregarEstudo(roteiro[0]);
}

function carregarEstudo(nome) {
    const info = database[nome];
    document.getElementById('study-title').innerText = nome.toUpperCase();
    document.getElementById('text-how').innerText = info.how;
    document.getElementById('text-resources').innerText = info.res;
    
    const list = document.getElementById('list-rules');
    list.innerHTML = "";
    info.rules.forEach(r => list.innerHTML += `<li>${r}</li>`);

    // Destaque no menu
    document.querySelectorAll('#sidebar-nav button').forEach(b => {
        b.classList.toggle('active-sport', b.innerText === nome.toUpperCase());
    });
}
